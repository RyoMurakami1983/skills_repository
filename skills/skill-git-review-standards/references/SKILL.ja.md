---
name: skill-git-review-standards
description: PRレビュー品質・サイズ・コミュニケーションの標準。
author: RyoMurakami1983
tags: [github, code-review, workflow, quality, collaboration]
invocable: false
version: 1.0.0
---

# Gitレビュー標準

レビュー目的、サイズ基準、コミュニケーション規則を定義します。

**Service Level Agreement (SLA)**: レビュー完了までの期待時間。
**LGTM (Looks Good To Me)**: 根拠が必要な非公式承認表現。
**CODEOWNERS**: レビュー担当を割り当てるGitHubファイル。

Progression: Simple → Intermediate → Advanced で段階的に強化します。
Reason: 段階的な強化でレビューの曖昧さを減らします。

## このスキルを使うとき

以下の状況で活用してください：
- レビュー期待値を標準化したい
- PRサイズ基準を定義したい
- 感情的なフィードバックを減らしたい
- 承認遅延や抜け漏れを防ぎたい
- チェックリストでオンボードしたい
- チーム拡大でも品質を維持したい

## 関連スキル

- **`skill-github-pr-workflow`** - PRフローとマージ方針
- **`skill-git-commit-practices`** - コミット形式と原子性
- **`skill-git-history-learning`** - 履歴から学ぶ

---

## 依存関係

- GitHubレビュー権限
- CODEOWNERS（任意）

---

## コア原則

1. **品質最優先** - レビューはmainを守る
2. **小さなPR** - 認知負荷を下げる
3. **敬意ある対話** - 速度を保つ
4. **根拠重視** - テスト/ログで確認
5. **共同責任** - 学びと所有を共有

---

## パターン1: レビュー目的の明確化

### 概要

レビューで必ず確認する項目を決めます。

### 基本例

```text
レビュー目標:
- 正確性
- セキュリティ
- 保守性
- テスト
```

### 中級例

- チーム共通のレビュー項目を作る
- `needs-review` ラベルを使う

### 上級例

- CODEOWNERSで専門家を指定

### 使うとき

- レビューがばらつく
- 重要領域が漏れる

---

## パターン2: PRサイズ基準

### 概要

サイズ基準を明確にします。

### 基本例

| サイズ | 差分 | 期待 |
|------|------|------|
| S | <200行 | 1日以内 |
| M | <500行 | 2日以内 |
| L | 500行+ | 分割 |

```text
# ✅ CORRECT
700行の変更は機能/リファクタに分割する。

# ❌ WRONG
900行を1PRで混在させる。
```

Why: PRを小さくするとレビュー精度が上がります。

### 中級例

- Lサイズは分割必須
- `size/L` ラベルを付与

### 上級例

- 上限超えはリード承認が必要

### 使うとき

- レビューが遅延する
- PRが大きすぎる

---

## パターン3: レビューチェックリスト

### 概要

チェックリストで抜け漏れを防ぎます。

### 基本例

```markdown
## Review Checklist
- [ ] テスト追加
- [ ] エラーハンドリング
- [ ] ログ
- [ ] セキュリティ影響
```

### 中級例

```text
重点: データ損失、性能、API変更
```

### 上級例

```csharp
// ✅ CORRECT - レビューチェック登録
using Microsoft.Extensions.DependencyInjection;

services.AddSingleton<ReviewChecklist>();
```

### 使うとき

- 必須項目が漏れる
- 新人レビューを支援したい

---

## パターン4: フィードバック表現

### 概要

敬意ある表現でレビューを行います。

### 基本例

```text
# ✅ CORRECT
"このケースのテスト追加をお願いできますか？"

# ❌ WRONG
"なんでテスト入れてないの？"
```

### 中級例

- "suggestion" と "blocker" を区別
- 理由を添えて依頼

### 上級例

- ブロッカー用テンプレートを使う

### 使うとき

- コメントが摩擦になる
- 意図が伝わらない

---

## パターン5: 指摘への対応

### 概要

修正後にレビュー再依頼します。

### 基本例

```bash
# ✅ CORRECT - 再依頼前にテスト
if ! npm test; then
  echo "Tests failed"; exit 1
fi
```

```text
# ❌ WRONG
テストなしで「再レビューお願いします」と依頼する。
```

Why: 根拠がないと再レビューが増えます。

### 中級例

- ブロッカーに返信
- 解決後に会話をresolve

### 上級例

- 変更点をまとめて返信

### 使うとき

- 修正が必要
- レビュー進行を早めたい

---

## パターン6: 承認数とSLA

### 概要

必要承認数とレビュー期限を決めます。

### 基本例

```text
# ✅ CORRECT
- 通常PRは1承認
- 高リスクは2承認

# ❌ WRONG
- 高リスクでも0承認
```

Why: 明示的な承認ルールが責任を明確にします。

### 中級例

- 1〜2日のSLA
- レビュー当番制

### 上級例

- SLA超過をリードにエスカレーション

### 使うとき

- 承認が滞る
- スルーが起きる

---

## パターン7: レビューアンチパターン検知

### 概要

形骸化レビューを防ぎます。

### 基本例

```text
アンチパターン:
- 読まずにLGTM
- テスト未確認で承認
```

### 中級例

- 複雑PRはレビュー要約を必須化

### 上級例

- 事後レビューで承認品質を監査

### 使うとき

- 本番事故が続く
- レビュー品質が低い

---

## ベストプラクティス

- Use: PRを小さく保つ
- Define: リスクに集中する
- Apply: 根拠（テスト/ログ）を確認
- Avoid: 誠実さを欠く表現
- Consider: 共有テンプレで標準化

---

## よくある落とし穴

1. **レビュー開始が遅い**  
Fix: SLAを決める。

2. **理由のない指摘**  
Fix: なぜ必要かを書く。

3. **形だけの承認**  
Fix: 高リスクは要約必須。

---

## アンチパターン

- レビューアーアーキテクチャを崩す読まず承認
- 失敗テストの無視
- スタイル論争ばかり

---

## クイックリファレンス

### レビューチェック

- [ ] 目的と影響を理解
- [ ] テスト/エラー処理を確認
- [ ] セキュリティ影響を確認
- [ ] PRサイズは妥当か
- [ ] 根拠を持って承認

### 判断テーブル

| 状況 | 対応 | Decision |
|------|------|----------|
| 大きなPR | 分割 | Decision: リスク低減 |
| 高リスク | 2承認 | Decision: 追加ガード |
| テストなし | ブロック | Decision: 根拠必須 |

---

## FAQ

**Q: 承認数は何人？**  
A: 通常1人、リスク高は2人から始めます。

**Q: レビューが遅いときは？**  
A: SLA後にエスカレーションします。

**Q: スタイル指摘は必要？**  
A: 可読性や信頼性に影響する場合のみ。

---

## リソース

- https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests
- https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners
