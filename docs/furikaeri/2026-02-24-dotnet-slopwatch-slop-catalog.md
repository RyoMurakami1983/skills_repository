# ふりかえり: dotnet-slopwatch 2層再構成 + SLOP-001

**日付**: 2026-02-24
**形式**: YWT（学び重視セッション）
**対象PR**: #67 (feat: add SLOP-xxx architectural anti-pattern catalog)

---

## Session Story

1. MillScanSplitter PR#20 のふりかえり文書を受領（Presentation層へのドメインロジック漏洩）
2. 求道者モードで分析 → dotnet-slopwatch を2層構造に再構成する案Cを提案・採用
3. SLOP-001: Layer Boundary Violation を EN/JA で作成、dotnet-shihan agent 深化
4. PR #67 作成（Phase 1）
5. ユーザーからツール正確性の指摘 → slopwatch v0.3.4 を実機インストール・検証
6. 6点の不正確を発見・修正（バージョン、severity、Claude/Copilot統合、invocable）
7. ユーザーとの4往復の対話で設計判断を深化（初動ルーティン追加）
8. Phase 2 コミット → PR #67 squash merge 完了
9. 固有名詞・実データがスキルに残っている問題を発見 → 匿名化が必要

---

## YWT

### Y（やったこと）
- dotnet-slopwatch を2層構造（SW-xxx コードレベル + SLOP-xxx アーキテクチャレベル）に再構成
- slopwatch v0.3.4 を実機インストールしてCLI・ルール・フラグを全検証
- dotnet-shihan に「層の責務（SLOP検出）」セクション、レビューチェックリスト強化、初動ルーティン追加
- Claude Code 自動フック + Copilot CLI オンデマンドの2パターンを Step 4 に記述

### W（わかったこと）
- **実ツール検証は必須** — 元のスキルにはバージョン（0.2.0→0.3.4）、SW006 severity（Warning→Error）、invocable 設定など複数の不正確があった。LLM生成コンテンツは事実検証なしで信用してはいけない
- **ユーザーの指摘が設計を深化させた** — 「.copilotに追加では？」から始まり、Claude/Copilot 統合パターン、invocable の意味、初動ルーティンまで発展。対話が設計品質を上げる
- **ふりかえり → スキル昇華のパイプラインが機能した** — PR#20の事例がSLOP-001として全プロジェクトで再利用可能な知識になった（成長の複利）
- **`--hook` は Claude Code 専用設計** — ツール側が特定AIアシスタント向けに最適化している事実を知り、ニュートラルな記述の重要性を再認識
- **固有名詞・実データの匿名化が必要** — ふりかえり文書の実プロジェクト名・実データフォーマットをそのままスキルの例に使うと、公開リポジトリに機密情報が漏洩するリスクがある。スキル昇華時にダミーデータへの置換が必要

### T（つぎやること）
- **SLOP-001 の実例を匿名化** — 実プロジェクト名・実データフォーマットをダミーに置換（最優先）
- 他の dotnet スキルも実ツール検証が必要か棚卸しする
- SLOP-002 以降は実案件で事例が蓄積してから追加（余白を守る）
- ふりかえり→スキル昇華時の匿名化ガイドラインを検討（ドキュメント作成スキルの可能性）

---

## Priority (top 1-3)

1. 🔴 **SLOP-001 匿名化** — 実プロジェクト固有情報がスキルに残っている。即時対応
2. 🟡 **既存 dotnet スキルの実ツール検証棚卸し** — slopwatch と同じ不正確パターンが他にもある可能性
3. 🟢 **ふりかえり→スキル昇華の匿名化ガイドライン** — ドキュメント作成スキルとして仕組み化を検討

---

## Action (SMART)

| Element | Value |
|---------|-------|
| **S** | SLOP-001 の実例から固有名詞・実データを匿名化（EN/JA両方） |
| **M** | 実プロジェクト名・実データフォーマット・実ドメイン用語がゼロ |
| **A** | ダミーデータに置換（例: ProjectX PR#N, `ORDER-001-STEEL-TYPE-A-LOT123`） |
| **R** | 公開リポジトリに機密情報を含めないセキュリティ要件 |
| **T** | 次回セッションで即時対応 |

---

## Meta-Furikaeri

**良かった点**: 対話的な計画モード（4往復の[[PLAN]]対話）が設計判断を深化させた。「実装前に計画を詰める」スタイルは維持。

**改善点**:
1. Phase 1 で実ツール検証をスキップした → ツール系スキル修正時は `dotnet tool install` + `--help` で検証するステップを必須化
2. ふりかえり文書の固有名詞をそのままスキルに転記した → スキル昇華時にダミーデータへの置換チェックを追加

**新しい気づき**: ふりかえり文書自体もダミー名前で書くことを検討。「ドキュメント作成スキル」として匿名化ルールを仕組み化する価値がある。
